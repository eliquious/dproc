<!doctype html><html><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Messages | dProc Articles</title><link href="https://fonts.googleapis.com/css?family=Oxygen|Oxygen+Mono:300,400,700" rel=stylesheet><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.0/normalize.min.css integrity="sha256-oSrCnRYXvHG31SBifqP2PM1uje7SJUyX0nTwO2RJV54=" crossorigin=anonymous><link rel=stylesheet href=../../book.min.9caf26ee2daca225930c0f85fd9eaa9f543aea51e1c0f8096e61e8a6706ae066.css></head><body><input type=checkbox style=display:none id=menu-control><main class="flex container"><aside class="book-menu fixed"><nav role=navigation><h2 class=book-brand><a href>dProc Articles</a></h2><ul><li><a href=../../docs/intro><strong>Introduction</strong></a></li><li><a href=../../docs/interfaces><strong>Interfaces and structs</strong></a><ul><li><a href=../../docs/messages>Messages</a></li><li><a href=../../docs/handlers>Handlers</a></li><li><a href=../../docs/processes>Processes</a></li><li><a href=../../docs/engine>Engine</a></li></ul></li><li><strong>Examples</strong><ul><li><a href=../../docs/examples/random>Random</a></li></ul></li></ul></nav></aside><div class=book-page><header class="align-center book-header"><label for=menu-control style=margin-right:24px><img src=../../svg/menu.svg alt=menu></label>
<strong>Messages</strong></header><article class=markdown><h2 id=messages><strong>Messages</strong></h2><p>Messages are the primary mechanism for communicating with other processes. The struct looks like this:</p><pre><code class=language-go>type Message struct {
    Timestamp time.Time
    Type      MessageType
    Forward   bool
    Value     interface{}
}
</code></pre><p><strong>Message fields</strong></p><ul><li><strong>Timestamp</strong>: When the message was created (e.g. <code>time.Now().UTC()</code>)</li><li><strong>Type</strong>: MessageType is just a string type for quick type-switching when processing the message</li><li><strong>Forward</strong>: If <code>true</code>, the message will be sent to all child nodes recursively. Otherwise, it will only be sent to the process&rsquo; direct children and no further.</li><li><strong>Value</strong>: Contains information fo be passed on. It will need to be type cast when received by the child processes.</li></ul><p>Forwarding is neccessary for process life-cycle management. For instance, starting and stopping all processes. Most messages will not be forwarded. The <code>Timestamp</code> field is not strictly necessary.</p><p><em>Note</em>: Setting the timestamp for every message will degrade performance.</p><h3 id=messagetypes>MessageTypes</h3><p>All messages must have a type in order to be processed. MessageTypes are simply const strings which identify the message&rsquo;s purpose.</p><pre><code class=language-go>// MessageType helps enumerate message types
type MessageType string
</code></pre><p>Custom message types can be defined like so:</p><pre><code class=language-go>// TypeRandom is the message type for random numbers
const TypeRandom = dproc.MessageType(&quot;Random&quot;)
</code></pre><h3 id=built-in-messages>Built-in messages</h3><p>There are only two built-in messages types. They are also forwarded to all children when using the default process. This informs all processes in the pipeline about the life-cycle state. For instance, starting and stopping the pipeline.</p><pre><code class=language-go>// Common message types
const (
	MessageTypeStart MessageType = &quot;START&quot;
	MessageTypeStop  MessageType = &quot;STOP&quot;
)
</code></pre><p>Handlers can also listen for these messages if additional initialization or clean-up is required, like opening/closing a file.</p></article></div><aside class="book-toc fixed"><nav id=TableOfContents><ul><li><ul><li><a href=#messages><strong>Messages</strong></a><ul><li><a href=#messagetypes>MessageTypes</a></li><li><a href=#built-in-messages>Built-in messages</a></li></ul></li></ul></li></ul></nav></aside></main></body></html>